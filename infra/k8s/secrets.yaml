# =============================================================================
# Secrets - Sensitive configuration
# 
# IMPORTANT: Do NOT commit real secrets to git!
# Use one of these approaches:
#   1. Sealed Secrets (Bitnami): encrypts secrets, safe to commit
#   2. External Secrets Operator: syncs from AWS Secrets Manager, Vault, etc.
#   3. SOPS: encrypts YAML files with age/gpg keys
#   4. Helm secrets plugin: integrates with SOPS
#
# This file contains PLACEHOLDER values only.
# Replace with base64-encoded real values or use a secrets operator.
#
# To encode a value: echo -n 'your-secret' | base64
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: ml-scheduler-secrets
  namespace: ml-scheduler
  labels:
    app: ml-scheduler
type: Opaque
data:
  # Database credentials
  # echo -n 'scheduler' | base64 = c2NoZWR1bGVy
  POSTGRES_USER: c2NoZWR1bGVy
  # echo -n 'CHANGE_ME_IN_PRODUCTION' | base64
  POSTGRES_PASSWORD: Q0hBTkdFX01FX0lOX1BST0RVQ1RJT04=
  
  # Full database URL
  # echo -n 'postgresql://scheduler:CHANGE_ME@postgres:5432/ml_scheduler?schema=public' | base64
  DATABASE_URL: cG9zdGdyZXNxbDovL3NjaGVkdWxlcjpDSEFOR0VfTUVAcG9zdGdyZXM6NTQzMi9tbF9zY2hlZHVsZXI/c2NoZW1hPXB1YmxpYw==
  
  # JWT Secret (generate with: openssl rand -base64 64)
  # echo -n 'CHANGE_THIS_TO_A_SECURE_64_BYTE_RANDOM_STRING_IN_PRODUCTION' | base64
  JWT_SECRET: Q0hBTkdFX1RISVNfVE9fQV9TRUNVUkVfNjRfQllURV9SQU5ET01fU1RSSU5HX0lOX1BST0RVQ1RJT04=
  
  # Email service (optional)
  # SMTP_PASSWORD: base64-encoded-value
  
  # API keys (optional)
  # EXTERNAL_API_KEY: base64-encoded-value
---
# =============================================================================
# SealedSecret Example (requires Sealed Secrets controller)
# Generate with: kubeseal --format yaml < secret.yaml > sealed-secret.yaml
# =============================================================================
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   name: ml-scheduler-secrets
#   namespace: ml-scheduler
# spec:
#   encryptedData:
#     POSTGRES_PASSWORD: AgA...encrypted...
#     JWT_SECRET: AgB...encrypted...
#     DATABASE_URL: AgC...encrypted...
---
# =============================================================================
# ExternalSecret Example (requires External Secrets Operator)
# Syncs secrets from AWS Secrets Manager, HashiCorp Vault, etc.
# =============================================================================
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: ml-scheduler-external
#   namespace: ml-scheduler
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     kind: ClusterSecretStore
#     name: aws-secrets-manager
#   target:
#     name: ml-scheduler-secrets
#     creationPolicy: Owner
#   data:
#     - secretKey: POSTGRES_PASSWORD
#       remoteRef:
#         key: production/ml-scheduler/database
#         property: password
#     - secretKey: JWT_SECRET
#       remoteRef:
#         key: production/ml-scheduler/jwt
#         property: secret
#     - secretKey: DATABASE_URL
#       remoteRef:
#         key: production/ml-scheduler/database
#         property: url
